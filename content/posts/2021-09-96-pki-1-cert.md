---
title: "Public Key Infrastructure Part 1 - Keys"
date: 2021-09-06T11:25:37-07:00
description: Explain what a digital certificate is.
images:
  - images/ckad-certified-kubernetes-application-developer.png
slug: public-key-infrastructure-1
tags:
  - pki
  - certificate
  - public key
type: post
---

{{< figure
    src="/images/keys.jpeg"
    alt="3 Keys on a table."
>}}

Photo credit: [Florian Berger](https://unsplash.com/photos/Nel8STCcWy8) on [Unsplash](https://unsplash.com/)

## Introduction

In my [openssl certificate command blog]({{< relref "/posts/2021-06-12-openssl-notes.md" >}}), I listed out common commands for dealing with certificate using openssl. I was doing some TLS for my work and had to learn the PKI. I wished I had learned it sooner. Security as a concept has always scared me because I always thought you need strong math skills. Although it is true, understanding the concept is not hard.

The goal for me is to write a blog serie about PKI and solidify my own understanding. By doing so, hopefully can help others understand the power and importance of PKI. This is the first part and I will be separating the topics into small digestible blogs.


## Keys & What are they?

To illustrate the concept, I find it easier to use it in examples. Explaining it in a way that will tell how it works and why it is needed.

### Scene 1 üçø

_Alice_ üë© wants to send a love letter to _Bob_ üòé. But she does not want anyone else to look at it. If she sends it over the mail, _Chad_ üòà could steal and find out her love interest for _Bob_. If she sends over the internet, _Chad_ can also be sniffing at _Alice_'s traffic.

To prevent _Chad_ from looking at the letter, we need to encrypt the love letter. This means that even if _Chad_ can look at the letter, he will not understand what it means. To achieve this, we use a concept called a **"key"**. A key, or an encryption key, is a random and hopefully long sequence of characters. Key encryption is a mathematical algorithm for turing a plaintext (un-encrypted) into a seemingly random characters using said key. A key can be used to both encrypt and decrypt a plaintext. An encrypted text is called **cipher text**. This is called "symmetric cryptography".

### Scene 2 üçøüçø

_Alice_ and _Bob_ meet up and agree on a key. Then they go back home with the key and start an encrypted communication. Perfect, now can they communicate without being spied on? Not quite yet.

This is a very inconvenient and not practical way of exchange the key. Because sometime you can't physically meet up. So we need a secure way to exchange the key but we can't establish a secure communication without a key. This is the chicken and egg problem.

###  Intermission - Public Key Cryptography

To safely communicate an encryption key, people who are much smarter than me designed a scheme known as ‚Äúpublic-key cryptography‚Äù (also called asymmetric cryptography). The principle idea being that you generate two keys:

1. A public key
1. A private key

As the name suggests, the public key, can be distributed and shared to the public (everyone). The private key is kept securely locally. If someone gets the hold of the public, they can't do anything with it.

How does having 2 keys solve the problem? Now _Alice_ and _Bob_ never have to meet up, they can just send their own public keys to each other, then only the other person can decrypt the messages. People can share their public keys on the internet, at the end of an email, anywhere. It is meant to be shared.


### Scene 3 üçøüçøüçø

Let's go back to _Alice_, _Bob_, and _Chad_. _Alice_ and _Bob_ create their own key pairs. Now, let's try again.

1. _Alice_ encrypts her love letter with her private key, and sends the cipher text to _Bob_
1. _Bob_ receives the cipher text and decrypts with _Alice_'s public key.
1. <...>

Problem solved? In an perfect world, this would work and nobody can understand what they are talking about. The message will all be garbage. In the real world, there is a very serious problem. How does _Bob_ know that he has _Alice_'s public key. The key does not have it's identity.

Imagine _Chad_ impersonating _Alice_. He can replace _Alice_'s public key with his own public key, and send it to _Bob_. At this point, _Bob_ **thinks** he is talking to _Alice_, but in fact, it is _Chad_.

## Summary - End of Act 1.

Public key cryptography is an amazing and simple concept. The actual math is complicated, for sure, but you and I don‚Äôt need to understand it to appreciate its value.

---

In this blog, I have described what is a key, symmetric and asymmetric cryptography, why they are needed, and their potential flaws. Please do not misunderstand me. I am **not** saying that symmetric cryptography is bad, because we can't share the key easily. I am only describing it is not the right tool for the job (establishing a secure connection). In fact, most of the messages exchanged over the internet is using symmetric cryptograph once we have established a secure connection because it is much faster.

In the next blog, I will explain how we can fix the key exchange problem without the man in the middle attack. And hopefully save _Alice_ and _Bob_'s relationship.
